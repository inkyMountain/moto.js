(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):(a=a||self,b(a.moto={}))})(this,function(a){"use strict";var i=Math.pow;function b(a,b){return{x:c(a[0].x,a[1].x,a[2].x,b),y:c(a[0].y,a[1].y,a[2].y,b)}}function c(a,b,c,d){return i(1-d,2)*a+2*(1-d)*d*b+i(d,2)*c}function d(a,b){return{x:e(a[0].x,a[1].x,a[2].x,a[3].x,b),y:e(a[0].y,a[1].y,a[2].y,a[3].y,b)}}function e(a,b,c,d,e){return i(1-e,3)*a+3*i(1-e,2)*e*b+3*(1-e)*i(e,2)*c+i(e,3)*d}function f(a,b){return Math.sqrt(i(a.x-b.x,2)+i(a.y-b.y,2))}function g(a,b,c,d,e){return{x:h(a.x,b.x,c.x,d.x,e),y:h(a.y,b.y,c.y,d.y,e)}}function h(a,b,c,d,e){return .5*(((-a+3*b-3*c+d)*e+(2*a-5*b+4*c-d))*e+c-a)*e+b}var j="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,k=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(){j.requestAnimationFrame=j.requestAnimationFrame||setImmediate,j.cancelAnimationFrame=j.cancelAnimationFrame||clearImmediate}),l=Object.freeze({linear:function(a){return a},easeOut:function(a){return a*(2-a)},easeIn:function(a){return i(a,2)},easeInOut:function(a){return(a*=2,1>a)?.5*i(a,2):(a--,.5*(1-a*(a-2)))}}),m=Object.freeze({bezier:function(a){var c=a.points,d=void 0===c?[]:c,e=a.duration,f=void 0===e?1:e,g=a.ease,h=void 0===g?function(a){return a}:g,i=a.loop,j=void 0===i?0:i,k=a.yoyo,l=void 0===k?0:k,m={yoyo:0,loop:0};return{start:function(a){function c(){n+=1/60/f*o,1<n?n=1:0>n?n=0:null,i(b(d,h(n))),1===o&&1==n||-1===o&&0==n?j>m.loop?(m.loop++,n=0,g=requestAnimationFrame(c)):l>m.yoyo?(m.yoyo++,o*=-1,g=requestAnimationFrame(c)):(r=!0,k&&k()):g=requestAnimationFrame(c)}var e,g,i,k,n=0,o=1,p=!1,q=!1,r=!1;return a instanceof Function?i=a:(e=a,i=e.update,k=e.complete,e),c(),{stop(){p=!0,cancelAnimationFrame(g)},pause(){if(!(p||r))return q=!0,cancelAnimationFrame(g),this},resume(){return q&&(q=!1,c()),this}}}}},cubicBezier:function(a){var b=a.points,c=void 0===b?[]:b,e=a.duration,f=void 0===e?1:e,g=a.ease,h=void 0===g?function(a){return a}:g,i=a.yoyo,j=void 0===i?0:i,k=a.loop,l=void 0===k?0:k,m={yoyo:0,loop:0};return{start:function(a){function b(){n+=1/60/f*o,1<n?n=1:0>n?n=0:0,i(d(c,h(n))),1===o&&1==n||-1===o&&0==n?l>m.loop?(m.loop++,n=0,g=requestAnimationFrame(b)):j>m.yoyo?(m.yoyo++,o*=-1,g=requestAnimationFrame(b)):(r=!0,k&&k()):g=requestAnimationFrame(b)}var e,g,i,k,n=0,o=1,p=!1,q=!1,r=!1;return a instanceof Function?i=a:(e=a,i=e.update,k=e.complete,e),b(),{stop(){p=!0,cancelAnimationFrame(g)},pause(){if(!(p||r))return q=!0,cancelAnimationFrame(g),this},resume(){return q&&(q=!1,b()),this}}}}},catmullRom:function(a){var b=a.points,c=a.speed,d=void 0===c?10:c,e=a.loop;if(void 0!==e&&e){var h=b[0],i=b[b.length-1];h.x===i.x&&h.y===i.y||b.push(h)}return b.unshift(b[0]),b.push(b[b.length-1]),{start:function(a){function c(){if(k+=u,1<k?k=1:null,i(g(p,q,r,s,k)),1===k){var a=n.next(),b=a.value,d=a.done;d?j&&j():(p=b.p1,q=b.p2,r=b.p3,s=b.p4,u=b.dt,k=0,h=requestAnimationFrame(c))}else h=requestAnimationFrame(c)}var e,h,i,j,k=0,l=!1,m=!1;a instanceof Function?i=a:(e=a,i=e.update,j=e.complete,e);var n=function(){var a=0;return{next(){var c={p1:b[a],p2:b[a+1],p3:b[a+2],p4:b[a+3],dt:d/f(b[a+1],b[a+2])},e=a+3>=b.length;return a++,{value:c,done:e}}}}(),o=n.next().value,p=o.p1,q=o.p2,r=o.p3,s=o.p4,u=o.dt;return c(),{stop(){l=!0,cancelAnimationFrame(h)},pause(){if(!(l||!1))return m=!0,cancelAnimationFrame(h),this},resume(){return m&&(m=!1,c()),this}}}}}});a.tween=function(a){var b=a.from,c=a.to,d=a.duration,e=void 0===d?1:d,f=a.ease,g=void 0===f?function(a){return a}:f,h=a.yoyo,i=void 0===h?0:h,j=a.loop,k=void 0===j?0:j;return{start:function(a){function d(){if(q+=1/60/e*r,1<q?q=1:0>q?q=0:null,o)for(var a in m)n[a]=b[a]+m[a]*g(q);else n=b+m*g(q);h(n),1===r&&1==q||-1===r&&0==q?k>p.loop?(p.loop++,q=0,l=requestAnimationFrame(d)):i>p.yoyo?(p.yoyo++,r*=-1,l=requestAnimationFrame(d)):(v=!0,j&&j()):l=requestAnimationFrame(d)}var f,h,j,l,m,n,o=isNaN(b),p={yoyo:0,loop:0},q=0,r=1,s=!1,u=!1,v=!1;return o?(m={},n={},Object.keys(b).forEach(function(a){m[a]=c[a]-b[a]})):m=c-b,a instanceof Function?h=a:(f=a,h=f.update,j=f.complete,f),d(),{stop(){s=!0,cancelAnimationFrame(l)},pause(){return s||v?this:(u=!0,cancelAnimationFrame(l),this)},resume(){return u&&(u=!1,d()),this}}}}},a.chain=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return{start:function(a){function c(){g=b.shift().start({update:e,complete(){b.length?c():(i=!0,f&&f())}})}var d,e,f,g,h=!1,i=!1,j=!1;return a instanceof Function?e=a:(d=a,e=d.update,f=d.complete,d),c(),{stop(){h=!0,g&&g.stop()},pause(){if(!(h||i))return j=!0,g.pause(),this},resume(){return j&&g&&(j=!1,g.resume()),this}}}}},a.composite=function(a){var b=Object.keys(a);return{start:function(c){var d,e,f,g={},h={start:0,end:0},i=!1,j=!1;c instanceof Function?e=c:(d=c,e=d.update,f=d.complete,d);var k=b.map(function(c){return h.start++,a[c].start({update:function(a){g[c]=a,h.start===b.length&&e(g)},complete:function(){h.end++,h.end===b.length&&f&&f()}})});return{stop(){i=!0,k.forEach(function(a){return a.stop()})},pause(){if(!(i||!1))return j=!0,k.forEach(function(a){return a.pause()}),this},resume(){return j?(j=!1,void k.forEach(function(a){return a.resume()})):this}}}}},a.easing=l,a.curve=m,Object.defineProperty(a,"__esModule",{value:!0})});
